<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Add New Product</title>
  <link rel="stylesheet" href="add-product-styles.css">
  <style>
    /* Style for the uploaded image */
    .uploaded-img {
      width: 100%;
      max-width: 300px;
      height: auto;
      object-fit: cover;
    }

    /* To style the image preview container */
    .image-upload {
      display: flex;
      justify-content: center;
      align-items: center;
      border: 2px dashed #ccc;
      padding: 20px;
      margin-bottom: 20px;
    }

    /* Preview section styling */
    #product-preview .clothes {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 20px;
    }

    #product-preview img.clothes-img {
      width: 200px;
      height: 200px;
      object-fit: cover;
      margin-bottom: 10px;
    }

    /* Hide the preview button initially */
    .preview-btn {
      display: none;
    }
    body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-color: #f9f9f9;
  }
  
  .container {
    max-width: 900px;
    margin: 20px auto;
    padding: 20px;
    background: white;
    border: 1px solid #ddd;
    border-radius: 5px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
  }
  
  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  h1 {
    font-size: 20px;
    margin: 0;
  }
  
  .header-buttons {
    display: flex;
    align-items: center;
  }
  
  button {
    margin-left: 10px;
    padding: 5px 10px;
    font-size: 14px;
    border: 1px solid #ccc;
    border-radius: 5px;
    background-color: #f0f0f0;
    cursor: pointer;
  }
  
  .arrow-controls {
    display: flex;
    gap: 5px;
  }
  
  .arrow {
    display: inline-block;
    font-size: 16px;
    cursor: not-allowed;
    color: #aaa;
  }
  
  .tabs {
    margin-top: 20px;
    border-bottom: 1px solid #ddd;
    display: flex;
    gap: 10px;
  }
  
  .tabs a {
    text-decoration: none;
    color: #007bff;
    padding: 5px;
    font-size: 14px;
  }
  
  .tabs a.active {
    border-bottom: 2px solid #007bff;
    font-weight: bold;
  }
  
  .tabs a.disabled {
    text-decoration: line-through;
    color: #aaa;
    cursor: not-allowed;
  }
  
  .form-section {
    display: flex;
    margin-top: 20px;
  }
  
  .form-left {
    flex: 1;
    text-align: center;
  }
  
  .image-upload {
    width: 150px;
    height: 150px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    border: 1px dashed #ccc;
    border-radius: 5px;
  }
  
  .image-placeholder {
    font-size: 30px;
    color: #aaa;
  }
  
  .form-right {
    flex: 2;
    padding-left: 20px;
  }
  
  .form-group {
    margin-bottom: 15px;
  }
  
  label {
    display: block;
    font-size: 14px;
    margin-bottom: 5px;
  }
  
  input {
    width: 100%;
    padding: 8px;
    font-size: 14px;
    border: 1px solid #ccc;
    border-radius: 5px;
  }
  
  .price-input {
    display: flex;
    align-items: center;
    gap: 5px;
  }
  
  .price-input span {
    font-size: 16px;
  }

    .go-back {
      margin-top: 20px;
      padding: 8px 15px;
      font-size: 14px;
      border: 1px solid #ccc;
      border-radius: 5px;
      background-color: #f0f0f0;
      cursor: pointer;
      text-align: center;
      color: #333;
      display: inline-block;
      text-decoration: none;
    }

    .go-back:hover {
      background-color: #e0e0e0;
    }

   
    #category {
      width: 100%; 
      padding: 10px; 
      font-size: 14px; 
      border: 1px solid #ccc;
      border-radius: 5px;
      background-color: #fff;
    }

    /* Style for Update and Delete buttons */
    .action-buttons {
      margin-top: 20px;
    }

    .action-buttons button {
      padding: 10px 15px;
      font-size: 14px;
      border: 1px solid #ccc;
      border-radius: 5px;
      cursor: pointer;
      background-color: #f0f0f0;
      color: #333;
    }

    .action-buttons .update-btn:hover {
      background-color: rgb(72, 199, 72);
    }

    .action-buttons .delete-btn:hover {
      background-color: red; 
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Add New Product</h1>
      <div class="header-buttons">
        <button class="add-product" onclick="resetForm()">Add New Product</button>
      </div>
    </header>
    <div class="form-section">
      <div class="form-left">
        <!-- Image Upload Section -->
        <div class="image-upload">
          <input type="file" id="image-upload" accept="image/*" onchange="previewImage(event)">
          <div class="image-placeholder" id="image-placeholder">+</div>
          <p>Add image</p>
        </div>
      </div>
      <div class="form-right">
        <form>
          <div class="form-group">
            <label for="name">Name</label>
            <input type="text" id="name" placeholder="Name of product">
          </div>
          <div class="form-group">
            <label for="id-number">ID-Number</label>
            <input type="text" id="id-number" placeholder="Product ID">
          </div>
          <div class="form-group">
            <label for="description">Description</label>
            <input type="text" id="description" placeholder="Write the product description here">
          </div>
          <div class="form-group">
            <label for="qty">Qty</label>
            <input type="number" id="qty" value="1">
          </div>
          <div class="form-group">
            <label for="price">Price</label>
            <div class="price-input">
              <span>$</span>
              <input type="text" id="price" value="20.00">
            </div>
          </div>
          <div class="form-group">
            <label for="category">Category</label>
            <select id="category">
              <option value="casual">Casual</option>
              <option value="formal">Formal</option>
              <option value="party">Party</option>
              <option value="gym">Gym</option>
            </select>
          </div>
          <!-- Action Buttons -->
          <div class="action-buttons">
            <button type="button" class="update-btn">Update</button>
            <button type="button" class="delete-btn">Delete</button>
            <button type="button" class="preview-btn" onclick="previewProduct()">Preview Product</button>
          </div>
        </form>
        <!-- Go Back Button -->
        <a class="go-back" onclick="goBack()">Go Back</a>
      </div>
    </div>
  </div>

  <!-- Product Preview Section -->
  <div id="product-preview" style="display: none;">
    <div class="clothes">
      <img id="preview-image" src="" class="clothes-img" alt="Product Image" />
      <h2 id="preview-name" class="clothes-description"></h2>
      <p id="preview-description" class="clothes-description"></p>
      <p class="ratings"><img src="images/review.svg" alt="ratings" /> 4.0/5</p>
      <h2 id="preview-price" class="price"></h2>
    </div>
  </div>

  <script>
    // JavaScript function to go back to the previous page
    function goBack() {
      window.history.back();
    }

    // Event listeners for buttons 
    document.querySelector('.update-btn').addEventListener('click', updateProduct);
    document.querySelector('.delete-btn').addEventListener('click', deleteProduct);

    //To  Update Product Function
      function updateProduct() {
  const name = document.getElementById('name').value;
  const id = document.getElementById('id-number').value;
  const description = document.getElementById('description').value;
  const qty = document.getElementById('qty').value;
  const price = document.getElementById('price').value;
  const category = document.getElementById('category').value;
  const image = document.querySelector('.uploaded-img') ? document.querySelector('.uploaded-img').src : '';

  if (name && id && description && price && image) {
    //To  Retrieve existing products from localStorage
    const products = JSON.parse(localStorage.getItem('products')) || [];

    //To  Check if the product already exists (update scenario)
    const existingIndex = products.findIndex(product => product.id === id);

    const newProduct = { id, name, description, qty, price, category, image };

    if (existingIndex !== -1) {
      //To  Update the existing product
      products[existingIndex] = newProduct;
      alert('Product updated successfully!');
    } else {
      //To  Add the new product
      products.push(newProduct);
      alert('Product added successfully!');
    }

    //To  Save updated products array to localStorage
    localStorage.setItem('products', JSON.stringify(products));

    //To  Reset the form for the next product
    resetForm();
  } else {
    alert('Please fill in all the fields to add/update the product.');
  }
}

    //To  Delete Product Function i.e.(reset form and clear preview)
    function deleteProduct() {
      if (confirm('Are you sure you want to delete this product?')) {
        //To  Reset all form fields to default values
        resetForm();
        //To  Hide the product preview section
        document.getElementById('product-preview').style.display = 'none';
        //To  Hide the preview button
        document.querySelector('.preview-btn').style.display = 'none';

        alert('Product deleted successfully!');
      }
    }

    //To  Reset the form and re-enable all inputs for new product
    function resetForm() {
      //To  Reset all form fields to default values
      document.getElementById('name').value = '';
      document.getElementById('id-number').value = '';
      document.getElementById('description').value = '';
      document.getElementById('qty').value = '1';
      document.getElementById('price').value = '20.00';
      document.getElementById('category').value = 'casual';
      
      //To  Reset the image preview
      const imagePlaceholder = document.getElementById('image-placeholder');
      const uploadedImage = document.querySelector('.uploaded-img');
      if (uploadedImage) {
        uploadedImage.remove();
      }
      imagePlaceholder.style.display = 'block';

      //To  Disable form inputs for new product (after update)
      disableForm(false);

      //To  Hide the preview section
      document.getElementById('product-preview').style.display = 'none';

      //To  Hide the preview button
      document.querySelector('.preview-btn').style.display = 'none';
    }

    //To  Disable or enable the form fields based on product status
    function disableForm(isDisabled) {
      const fields = ['name', 'id-number', 'description', 'qty', 'price', 'category'];
      fields.forEach(field => {
        const element = document.getElementById(field);
        element.disabled = isDisabled;
      });
    }

    // ///////////////////////////////////
    function previewImage(event) {
  const reader = new FileReader();
  reader.onload = function () {
    const imgElement = document.createElement('img');
    imgElement.src = reader.result; // Base64 data
    document.getElementById("image-placeholder").replaceWith(imgElement);

    // Example: Save the image base64 data to localStorage as part of product object
    const newProduct = {
      id: document.getElementById("id-number").value,
      name: document.getElementById("name").value,
      price: parseFloat(document.getElementById("price").value),
      image: reader.result, // Save base64 image data
    };
    const products = JSON.parse(localStorage.getItem("products")) || [];
    products.push(newProduct);
    localStorage.setItem("products", JSON.stringify(products));
  };
  reader.readAsDataURL(event.target.files[0]);
}

  </script>
</body>
</html>
